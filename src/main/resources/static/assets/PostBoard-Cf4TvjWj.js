import{g as T,u as k,a as B,r,j as e}from"./index-DyHKvFXx.js";import{T as D}from"./TitleHeader-DEuZPhEZ.js";import{a as P}from"./MarkerClusterer-Ss9l1jFA.js";import{S as U}from"./ScheduleDay-brR7VubL.js";import{j as f}from"./jwt-BWTztxGh.js";import{F as o}from"./index-Cy_jBpxb.js";import{U as A}from"./index-NNXuVRA4.js";import{I as h}from"./index-BN7SjR02.js";import{B as C}from"./button-CVG2PKR4.js";import"./match-D2f2mzn-.js";import"./tripAtom-C5-Ou6O1.js";import"./axios-upsvKRUO.js";import"./pic-Bp3CpqNF.js";import"./index--TRX9LY9.js";import"./index-BtmQxHij.js";import"./useId-4VG1t10X.js";import"./index-CbCICOLq.js";import"./index-qeKOiAJN.js";import"./Portal-g2bJLkL6.js";import"./useSize-CzlGeqMr.js";import"./ContextIsolator-Bz1oyizr.js";import"./context-BzIqkGrz.js";import"./collapse-BbEVqHco.js";import"./index-CjdS8Kft.js";import"./useLocale-D7gYd7Ok.js";import"./fade-D4jT0onp.js";import"./CheckOutlined-Bm_iSAUT.js";import"./BaseInput-Lg7uM-32.js";const ce=()=>{var x;T("accessToken");const[u]=k(),n=parseInt(u.get("tripId")),g=B(),j=()=>{g(-1)};r.useState(""),r.useState("여행기 제목"),r.useState("");const[y,b]=r.useState({}),[p,c]=r.useState([]),[w,m]=r.useState(!1),v=async()=>{try{const t=await f.get(`/api/trip?trip_id=${n}`);console.log("여행확인하기",t.data);const l=t.data.data;b(l)}catch(t){console.log(t)}};r.useEffect(()=>{v()},[]);const[N]=o.useForm(),S=({fileList:t})=>c(t),F=async t=>{const{title:l,file:a,content:I}=t,L={tripId:n,title:l,content:I},i=new FormData;c(a.fileList),i.append("req",new Blob([JSON.stringify(L)],{type:"application/json"})),console.log(t),console.log(p),a&&a.fileList&&a.fileList.length>0&&a.fileList.forEach(s=>{i.append("tripReviewPic",s.originFileObj)});const d=i.get("p");d&&d.text().then(s=>console.log("p의 내용:",s)),console.log("보낸 데이터",[...i]);try{const s=await f.post("/api/trip-review",i);console.log(s.data)}catch(s){console.error(s)}};return e.jsxs("div",{children:[e.jsx(D,{icon:"back",onClick:j,title:"여행기 공유"}),e.jsx("div",{className:"mt-[60px] py-[40px] flex flex-col gap-[40px]",children:e.jsx("div",{className:"flex flex-col  px-[32px]",children:e.jsxs(o,{form:N,onFinish:F,layout:"vertical",className:"flex flex-col gap-[48px]",children:[e.jsx(o.Item,{name:"file",children:e.jsx(A,{id:"file",listType:"text",beforeUpload:()=>!1,fileList:p,onChange:S,showUploadList:!1,multiple:!0,children:e.jsx("div",{htmlFor:"fileUpload",className:`\r
            w-[160px] h-[160px] \r
            flex items-center justify-center\r
            bg-slate-100 rounded-lg\r
            hover:bg-[#e9eef3]\r
            transition duration-300\r
            cursor-pointer shrink-0`,children:e.jsx(P,{size:60,className:"text-slate-400"})})})}),e.jsx(o.Item,{name:"title",className:`border-b ${w?"border-primary":"border-slate-200"}`,children:e.jsx(h,{variant:"borderless",className:` px-[10px] py-[10px]\r
                text-slate-400 text-[36px] font-semibold\r
              placeholder:text-slate-400\r
                 `,onFocus:()=>m(!0),onBlur:()=>m(!1),placeholder:"여행기 제목"})}),e.jsx(o.Item,{name:"content",children:e.jsx(h.TextArea,{rows:4,placeholder:"이번 여행은 어떠셨나요? 여행에 대한 감상과 여행에서 경험한 꿀팁들을 남겨 다른 회원님들과 공유해보세요 !",variant:"borderless",maxLength:100,autoSize:{minRows:3,maxRows:5},style:{height:300,resize:"none"},className:"placeholder: text-[24px] placeholder: text-slate-400"})}),e.jsx("div",{className:"flex flex-col gap-[50px]",children:(x=y.days)==null?void 0:x.map((t,l)=>e.jsx(U,{data:t,showMap:!1,readOnly:!0}))}),e.jsx(o.Item,{className:"w-full",children:e.jsx(C,{type:"primary",htmlType:"submit",className:`w-full h-[80px] \r
                    text-slate-50 text-[24px] font-semibold`,children:"완료"})})]})})})]})};export{ce as default};
