import{g as S,c as C,n as k,r,u as v,j as e,b as w,a as $}from"./index-BDH47TWw.js";import"./TitleHeader-Cbinm1cJ.js";import{a as u,S as I}from"./SearchItems-qUPdJemY.js";import{a as g}from"./axios-upsvKRUO.js";import{a as B}from"./index-Dx1ag6er.js";import{a as L}from"./pic-Bp3CpqNF.js";import{c as P}from"./match-C8gFOv6c.js";import"./jwt-BtbCJ6GR.js";import{D as _}from"./DockBar-Ek2YQbl1.js";import"./iconBase-xDj5aick.js";import"./index-CAw9vkrj.js";import"./index-BYKM5Fq_.js";import"./context-VM2zlwt1.js";import"./Compact-Cfu1MAwM.js";import"./BaseInput-DgpuOJJW.js";import"./button-J55smYlO.js";import"./ContextIsolator-eB6Iu1jg.js";import"./Keyframes-B4c32onj.js";import"./CloseCircleFilled-DkOlg1e6.js";import"./useCSSVarCls-B75Ca3nN.js";import"./index-CzNusfcx.js";import"./index-CqscX1Ht.js";import"./index-D6h1dpo6.js";import"./KeyCode-DNlgD2sM.js";import"./Skeleton-CdURsCUQ.js";import"./index-DDGINF--.js";import"./index-B6gdGGd1.js";import"./index-2JRSZenb.js";import"./ExclamationCircleFilled-BVuawNWP.js";import"./InfoCircleFilled-WLpneQwI.js";import"./CloseOutlined-C89Dp7zH.js";const U=({searchData:i,setSearchData:s,setSearchValue:o,searchValue:a,setSearchState:l})=>{const c=S("accessToken"),{userId:m}=C(k),[p,j]=r.useState([]),[f,n]=r.useState([]),y=v(),A=async()=>{try{const x=(await g.get("/api/search/popular")).data;j(x.data)}catch(t){console.log("인기검색어 결과",t)}};r.useEffect(()=>{},[p]);const N=async()=>{try{const x=(await g.get(`/api/search/basic?user_id=${m}`,{headers:{Authorization:`Bearer ${c}`}})).data;n(x.data)}catch(t){console.log("최근 본 검색 결과",t)}};r.useEffect(()=>{},[f]);const b=t=>{console.log("클릭한 인기 검색어:",t),o(t.strfName),y(`/contents/index?strfId=${t.strfId}`)},R=t=>{console.log(t),y(`/contents/index?strfId=${t.strfId}`)},T=async t=>{const x={strf_id:t.strfId};try{const h=await g.patch(`/api/recent/hide?strf_id=${t.strfId}`,{...x},{headers:{Authorization:`Bearer ${c}`}});console.log(h.data),h.data&&N()}catch(h){console.log("개별 삭제",h)}},E=async()=>{try{const t=await g.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${c}`}});console.log(t.data),t.data&&N()}catch(t){console.log("개별 삭제",t)}};return r.useEffect(()=>{A(),c&&N()},[]),e.jsxs("div",{className:"px-[32px] flex flex-col gap-[50px]",children:[e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"인기 검색어"}),e.jsx("ul",{className:"flex gap-[20px] flex-wrap",children:p?p==null?void 0:p.map((t,x)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",onClick:()=>b(t),children:t.strfName},x)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),c?e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"최근 본 목록"}),e.jsx("button",{type:"button",className:"text-slate-400 text-[18px]",onClick:()=>E(),children:"모두 삭제"})]}),e.jsx("ul",{className:"flex flex-col gap-[20px]",children:f?f==null?void 0:f.map((t,x)=>e.jsxs("li",{className:"flex cursor-pointer items-center justify-between",children:[e.jsxs("div",{className:"flex gap-[15px]",onClick:()=>R(t),children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-2xl overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:t.strfPic?`${L}${t.strfId}/${t.strfPic}`:"/public/images/logo_icon_4.png",alt:t.strfName})}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:t.strfName}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:P(t.category)}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:t.locationTitle})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",onClick:()=>T(t),children:e.jsx(B,{})})]},x)):null})]}):null]})},d=[{type:"all",name:"전체"},{type:"TOUR",name:"관광지"},{type:"STAY",name:"숙소"},{type:"RESTAUR",name:"맛집"},{type:"FEST",name:"축제"}],F=({searchValue:i,searchData:s,setSearchData:o})=>{const[a,l]=r.useState(0);r.useEffect(()=>{console.log("selectedCate",a)},[a]);const c=r.useRef(null),m=Array.isArray(s)?s.filter(n=>n.category==="TOUR"):[],p=Array.isArray(s)?s.filter(n=>n.category==="STAY"):[],j=Array.isArray(s)?s.filter(n=>n.category==="RESTAUR"):[],f=Array.isArray(s)?s.filter(n=>n.category==="FEST"):[];return e.jsxs("div",{className:"px-[32px] py-[30px] flex flex-col gap-[30px]",children:[e.jsx("ul",{className:"flex gap-[10px]",ref:c,children:d.map((n,y)=>e.jsx("li",{className:`cursor-pointer font-semibold text-[16px] w-[124px] flex justify-center items-center px-[15px] py-[10px] gap-[10px] rounded-[8px] ${y===a?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{l(y)},children:n.name},y))}),a===0&&e.jsxs("div",{children:[e.jsx(u,{type:d[1].type,name:d[1].name,data:m,setSelectedCate:l,searchValue:i,searchData:s,setSearchData:o}),e.jsx(u,{type:d[2].type,name:d[2].name,data:p,setSelectedCate:l,searchValue:i,searchData:s,setSearchData:o}),e.jsx(u,{type:d[3].type,name:d[3].name,data:j,setSelectedCate:l,searchValue:i,searchData:s,setSearchData:o}),e.jsx(u,{type:d[4].type,name:d[4].name,data:f,setSelectedCate:l,searchValue:i,searchData:s,setSearchData:o})]}),a===1&&e.jsx("div",{children:e.jsx(u,{type:"TOUR",data:m,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:l})}),a===2&&e.jsx("div",{children:e.jsx(u,{type:"STAY",data:p,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:l})}),a===3&&e.jsx("div",{children:e.jsx(u,{type:"RESTAUR",data:j,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:l})}),a===4&&e.jsx("div",{children:e.jsx(u,{type:"FEST",data:f,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:l})})]})},je=()=>{w(),S("accessToken"),v(),$().state;const[s,o]=r.useState(!1),[a,l]=r.useState(""),[c,m]=r.useState([]),[p,j]=r.useState("");return r.useEffect(()=>{},[c]),r.useEffect(()=>{},[a]),e.jsxs("div",{className:"w-full flex flex-col gap-[30px]",children:[e.jsx(I,{searchValue:a,setSearchValue:l,setSearchState:o,inputValue:p,setInputValue:j,searchData:c,setSearchData:m}),s?e.jsx(F,{searchValue:a,searchData:c,setSearchData:m}):e.jsx(U,{setSearchState:o,searchData:c,setSearchData:m,setSearchValue:l,searchValue:a}),e.jsx(_,{})]})};export{je as default};
