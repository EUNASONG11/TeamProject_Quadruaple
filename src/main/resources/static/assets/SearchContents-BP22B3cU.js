import{g as S,c as R,k as E,r,u as v,j as e,b as A}from"./index-WSm8V2ST.js";import"./TitleHeader-CGwkCU68.js";import{a as j,S as k}from"./SearchItems-D6tzS42f.js";import{a as h}from"./axios-upsvKRUO.js";import{a as N}from"./index-BB4UIiI3.js";import{categoryKor as C}from"./ContentIndex-CBTDmMDi.js";import{a as $}from"./pic-Bp3CpqNF.js";import"./jwt-CcLdlPaZ.js";import"./iconBase-C31Zs2Ot.js";import"./index-B6azW7IG.js";import"./index-CkqEjpTn.js";import"./ContextIsolator-D6Qa4Vnz.js";import"./button-DdYXoYhD.js";import"./Keyframes-BXC_0NBG.js";import"./context-DbhbiqRO.js";import"./index-CVcjfV9d.js";import"./index-B5GccCGr.js";import"./KeyCode-DNlgD2sM.js";import"./Skeleton-BQ1iQ9oo.js";import"./ScheduleDay-BgqmVupp.js";import"./index-1EUDdVBk.js";import"./tripAtom-D7EKvL5P.js";import"./dayjs.min-B_Wydb6p.js";import"./PurePanel-BVZw4gEZ.js";import"./Overflow-BBxfpX5i.js";import"./CheckOutlined-DVpWJzl9.js";import"./CloseOutlined-BzJUIVo8.js";import"./useLocale-CiZtlZfJ.js";import"./index-DK3Dx2QH.js";import"./ExclamationCircleFilled-xsY2f4U_.js";import"./InfoCircleFilled-_br9GsSA.js";import"./index-C-bcgs0T.js";const _=({searchData:c,setSearchData:t,setSearchValue:a,searchValue:l,setSearchState:d})=>{const n=S("accessToken"),{userId:u}=R(E),[i,g]=r.useState([]),[x,o]=r.useState([]),p=v(),y=async()=>{try{const m=(await h.get("/api/search/popular",{headers:{Authorization:`Bearer ${n}`}})).data;console.log("인기검색어 결과",m),g(m.data)}catch(s){console.log("인기검색어 결과",s)}};r.useEffect(()=>{},[i]);const b=async()=>{try{const m=(await h.get(`/api/search/basic?user_id=${u}`,{headers:{Authorization:`Bearer ${n}`}})).data;console.log("최근 본 검색 결과",m),o(m.data)}catch(s){console.log("최근 본 검색 결과",s)}};r.useEffect(()=>{console.log("최근 본 검색 목록",x)},[x]);const w=s=>{console.log("클릭한 인기 검색어:",s),a(s.strfName)},T=s=>{console.log(s),p(`/contents/index?strfId=${s.strfId}`)};return r.useEffect(()=>{y(),b()},[]),e.jsxs("div",{className:"px-[32px] flex flex-col gap-[50px]",children:[e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"인기 검색어"}),e.jsx("ul",{className:"flex gap-[20px] flex-wrap",children:i?i==null?void 0:i.map((s,m)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",onClick:()=>w(s),children:s.strfName},m)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"최근 본 목록"}),e.jsx("button",{type:"button",className:"text-slate-400 text-[18px]",children:"모두 삭제"})]}),e.jsx("ul",{className:"flex flex-col gap-[20px]",children:x?x==null?void 0:x.map((s,m)=>e.jsxs("li",{className:"flex cursor-pointer items-center justify-between",onClick:()=>T(s),children:[e.jsxs("div",{className:"flex gap-[15px]",children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-2xl overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:s.strfPic?`${$}${s.strfId}/${s.strfPic}`:"/public/images/logo_icon_4.png",alt:s.strfName})}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:s.strfName}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:C(s.category)}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:s.locationTitle})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",children:e.jsx(N,{})})]},m)):e.jsxs("li",{className:"flex cursor-pointer justify-between items-center",children:[e.jsxs("div",{className:"flex gap-[15px]",children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-[16px] overflow-hidden bg-slate-200"}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:"제목"}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:"카테고리"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"지역"})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",children:e.jsx(N,{})})]})})]})]})},f=[{type:"all",name:"전체"},{type:"TOUR",name:"관광지"},{type:"STAY",name:"숙소"},{type:"RESTAUR",name:"맛집"},{type:"FEST",name:"축제"}],P=({searchValue:c,searchData:t,setSearchData:a})=>{const[l,d]=r.useState(0),n=r.useRef(null),u=t==null?void 0:t.filter(o=>o.category==="TOUR"),i=t==null?void 0:t.filter(o=>o.category==="STAY"),g=t==null?void 0:t.filter(o=>o.category==="RESTAUR"),x=t==null?void 0:t.filter(o=>o.category==="FEST");return e.jsxs("div",{className:"px-[32px] py-[30px] flex flex-col gap-[30px]",children:[e.jsx("ul",{className:"flex gap-[10px]",ref:n,children:f.map((o,p)=>e.jsx("li",{className:`cursor-pointer font-semibold text-[16px] w-[124px] flex justify-center items-center px-[15px] py-[10px] gap-[10px] rounded-[8px] ${p===l?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{d(p)},children:o.name},p))}),l===0&&e.jsxs("div",{children:[e.jsx(j,{type:f[1].type,name:f[1].name,data:u,searchValue:c,searchData:t,setSearchData:a}),e.jsx(j,{type:f[2].type,name:f[2].name,data:i,searchValue:c,searchData:t,setSearchData:a}),e.jsx(j,{type:f[3].type,name:f[3].name,data:g,searchValue:c,searchData:t,setSearchData:a}),e.jsx(j,{type:f[4].type,name:f[4].name,data:x,searchValue:c,searchData:t,setSearchData:a})]}),l===1&&e.jsx("div",{children:e.jsx(j,{type:"TOUR",data:u,searchValue:c,searchData:t,setSearchData:a,setSelectedCate:d})}),l===2&&e.jsx("div",{children:e.jsx(j,{type:"STAY",data:i,searchValue:c,searchData:t,setSearchData:a,setSelectedCate:d})}),l===3&&e.jsx("div",{children:e.jsx(j,{type:"RESTAUR",data:g,searchValue:c,searchData:t,setSearchData:a,setSelectedCate:d})}),l===4&&e.jsx("div",{children:e.jsx(j,{type:"FEST",data:x,searchValue:c,searchData:t,setSearchData:a,setSelectedCate:d})})]})},de=()=>{A();const c=S("accessToken");v();const[t,a]=r.useState(!1),[l,d]=r.useState(""),[n,u]=r.useState([]),[i,g]=r.useState("");r.useEffect(()=>{console.log("searchData",n)},[n]);const x=async()=>{const o={search_word:l,last_index:1};try{const p=await h.post(`/api/search/all?search_word=${l}&last_index=1`,{...o},{headers:{Authorization:`Bearer ${c}`}});console.log("검색 결과 호출",p.data);const y=p.data;u([...n,...y.data])}catch(p){console.log(p)}};return r.useEffect(()=>{console.log("searchValue:",l),x()},[l]),e.jsxs("div",{className:"w-full flex flex-col gap-[30px]",children:[e.jsx(k,{searchValue:l,setSearchValue:d,setSearchState:a,inputValue:i,setInputValue:g}),t?e.jsx(P,{searchData:n,searchValue:l,setSearchData:u}):e.jsx(_,{setSearchState:a,searchData:n,setSearchData:u,setSearchValue:d,searchValue:l})]})};export{de as default};
