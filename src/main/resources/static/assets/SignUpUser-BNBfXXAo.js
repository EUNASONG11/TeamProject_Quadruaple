import{p as B,j as e,r as l,u as D}from"./index-DIxnD1JS.js";import{C as a}from"./Checkbox-BeK9Yg2C.js";import{a as w}from"./axios-upsvKRUO.js";import{U as C}from"./api-B-eoqegl.js";import{T as k}from"./TitleHeader-serYiGmW.js";import{F as r}from"./index-DqPe37jj.js";import{I as n}from"./index-BJd-TzMh.js";import{B as U}from"./button-COK4q_fH.js";import"./context-lGdVmPVg.js";import"./Compact-Bk6bZNyr.js";import"./useCSSVarCls-DxqRy2bH.js";import"./iconBase-CW5Yvc9x.js";import"./ContextIsolator-XDRKbmbU.js";import"./Keyframes-_LtNcjJI.js";import"./collapse-BbEVqHco.js";import"./index-MzmBe5Z5.js";import"./index-G_TVl1Ti.js";import"./useLocale-BjdjyJW_.js";import"./ExclamationCircleFilled-Bv2RArU5.js";import"./CloseCircleFilled-DnDad3pI.js";import"./BaseInput-CdSNedUu.js";const z=B.memo(({policyType:c,setShowPolicy:u})=>e.jsxs("div",{className:"pt-[60px] max-w-3xl w-[768px] mx-auto h-screen fixed z-50 top-0 right-[50%] translate-x-[50%] bg-white",children:[e.jsx(k,{icon:"close",title:"약관",onClick:()=>{u(!1)}}),e.jsxs("h1",{className:"text-[24px] font-bold text-center",children:["약관 ",c]})]})),R={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:24}}},_={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}};a.Group;const me=()=>{const[c]=r.useForm(),[u,G]=l.useState("vertical"),[V,v]=l.useState({}),[m,x]=l.useState([]),[q,h]=l.useState(!1),[f,o]=l.useState(null),[N,S]=l.useState("required"),[F,g]=l.useState(!1),j=D(),I=t=>{j("/signup/confirmemail",{state:t})},P=()=>{j("/signin")},E=l.useCallback(t=>{x(t),h(t.length>4)},[]),$=l.useCallback(t=>{const s=t.target.checked;x(s?["required-1","required-2","required-3","required-4","option-1"]:[]),h(s)},[]),A=l.useCallback(async t=>{console.log("아이디 중복 체크 시도"),o("validating");try{const s=await w.get(`${C.checkDuplicatedEmail}${t.target.value}`);s.data.data===!0?o("success"):o("error"),console.log("아이디 중복 체크",s.data)}catch(s){console.log(s),o("error")}},[]),L=l.useCallback(async t=>{console.log("이메일 발송 데이터:",t);try{const s=await w.get(`${C.sendMail}${t.email}`,t);console.log("이메일 발송 결과:",s.data)}catch(s){console.log(s)}},[]),T=t=>{m.filter(p=>p==="option");const s=m.filter(p=>p.includes("required")),{confirm:i,...y}=t,b=t.email;v(y),s.length===4&&f==="success"?(console.log("이메일 링크 요청",{email:b}),L({email:b}),I(y)):console.log("제출 조건에 맞지 않음")},d=l.useCallback(t=>{S(t.target.value),g(!0)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:"back",title:"회원가입",onClick:P}),e.jsx("div",{className:"w-full px-28 py-[50px] mt-[60px]",children:e.jsxs(r,{...R,form:c,name:"register",onFinish:t=>T(t),className:"w-full",layout:u,scrollToFirstError:!0,children:[e.jsx(r.Item,{name:"name",label:"이름",rules:[{required:!0,message:"이름은 필수 입력 항목입니다.",whitespace:!0}],children:e.jsx(n,{placeholder:"이름을 입력하세요",style:{height:"60px"}})}),e.jsx(r.Item,{name:"email",label:"이메일",rules:[{type:"email",message:"이메일 형식에 맞지 않는 메일 주소입니다. 다시 입력해주세요."},{required:!0,message:"이메일은 필수 입력 항목입니다."}],hasFeedback:!0,validateStatus:f,children:e.jsx(n,{onBlur:t=>{t.target.value&&A(t)},placeholder:"이메일을 입력하세요",style:{height:"60px"}})}),e.jsx(r.Item,{name:"pw",label:"비밀번호",rules:[{required:!0,message:"비밀번호는 필수 입력 항목입니다."},{pattern:/^(?=.*[A-Za-z])(?=.*[\d~!@#$%^&*()_+=])[A-Za-z\d~!@#$%^&*()_+=]{8,20}$/,message:"비밀번호는 반드시 8-20자 이내 숫자, 특수문자(), 영문자 중 2가지 이상을 조합하셔야 합니다"}],children:e.jsx(n.Password,{placeholder:"비밀번호를 입력하세요",style:{height:"60px"}})}),e.jsx(r.Item,{name:"confirm",label:"비밀번호 확인",dependencies:["password"],rules:[{required:!0,message:"비밀번호 확인은 필수 입력 항목입니다."},({getFieldValue:t})=>({validator(s,i){return!i||t("pw")===i?Promise.resolve():Promise.reject(new Error("비밀번호가 일치하지 않습니다. 다시 입력해주세요."))}})],children:e.jsx(n.Password,{placeholder:"비밀번호를 다시 한번 입력하세요",style:{height:"60px"}})}),e.jsx(a,{onChange:$,checked:q,className:"bg-slate-100 w-full font-semibold text-lg mb-[15px] py-[10px] px-[15px] rounded-lg",children:"전체 동의합니다."}),e.jsxs(a.Group,{value:m,onChange:E,className:"flex flex-col gap-[10px] mb-[74px] w-full",children:[e.jsx(a,{value:"required-1",children:"[필수] 만 14세 이상입니다."}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(a,{value:"required-2",className:"underline",children:"[필수] 서비스 이용약관"}),e.jsx("button",{type:"button",className:"text-[16px] text-slate-300",value:"required-2",onClick:d,children:"보기"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(a,{value:"required-3",className:"underline",children:"[필수] 개인정보 수집 및 이용 동의"}),e.jsx("button",{type:"button",className:"text-[16px] text-slate-300",value:"required-3",onClick:d,children:"보기"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(a,{value:"required-4",className:"underline",children:"[필수] 위치서비스 이용 동의"}),e.jsx("button",{type:"button",className:"text-[16px] text-slate-300",value:"required-4",onClick:d,children:"보기"})]}),e.jsx(a,{value:"option-1",children:"[선택] 이벤트 및 할인 혜택 안내 동의"})]}),F?e.jsx(z,{policyType:N,setShowPolicy:g}):null,e.jsx(r.Item,{..._,children:e.jsx(U,{type:"primary",htmlType:"submit",block:!0,className:"h-[60px]",children:"다음"})})]})})]})};export{me as default};
