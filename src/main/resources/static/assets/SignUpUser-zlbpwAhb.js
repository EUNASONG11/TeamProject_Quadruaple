import{q as U,j as e,r as l,a as z}from"./index-DCiO2zt9.js";import{C as r}from"./Checkbox-BzIzIhWD.js";import{a as C}from"./axios-upsvKRUO.js";import{U as k}from"./api-B-eoqegl.js";import{T as v}from"./TitleHeader-DbVn1HSQ.js";import{F as a}from"./index-BorkJfPt.js";import{I as c}from"./index-HJzg_HzV.js";import{B as M}from"./button-D2uSiSHr.js";import"./useId-IhhDF7kv.js";import"./context-Dpse4XNJ.js";import"./useSize-BJ-bkfiM.js";import"./Portal-Be4Yb3ps.js";import"./collapse-BbEVqHco.js";import"./ContextIsolator-CE3SJgc1.js";import"./index-D--rIAs3.js";import"./index-D85iItX7.js";import"./index-DRaaD_Ms.js";import"./useLocale-D829AoqW.js";import"./BaseInput-B3eH5To0.js";const R=U.memo(({policyType:u,setShowPolicy:m})=>e.jsxs("div",{className:"pt-[60px] max-w-3xl w-[768px] mx-auto h-screen fixed z-50 top-0 right-[50%] translate-x-[50%] bg-white",children:[e.jsx(v,{icon:"close",title:"약관",onClick:()=>{m(!1)}}),e.jsxs("h1",{className:"text-[24px] font-bold text-center",children:["약관 ",u]})]})),_={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:24}}},G={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}};r.Group;const me=()=>{const[u]=a.useForm(),[m,V]=l.useState("vertical"),[Z,q]=l.useState({}),[d,h]=l.useState([]),[N,f]=l.useState(!1),[o,i]=l.useState(null),[S,F]=l.useState("required"),[I,g]=l.useState(!1),[j,P]=l.useState(!1),y=z(),E=s=>{y("/signup/confirmemail",{state:s})},$=()=>{y("/signin")},A=l.useCallback(s=>{h(s),f(s.length>4)},[]),L=l.useCallback(s=>{const t=s.target.checked;h(t?["required-1","required-2","required-3","required-4","option-1"]:[]),f(t)},[]),T=l.useCallback(async s=>{console.log("아이디 중복 체크 시도"),i("validating");try{const t=await C.get(`${k.checkDuplicatedEmail}${s.target.value}`);t.data.data===!0?i("success"):i("error"),console.log("아이디 중복 체크",t.data)}catch(t){console.log(t),i("error")}},[]),B=l.useCallback(async s=>{console.log("이메일 발송 데이터:",s);try{const t=await C.get(`${k.sendMail}${s.email}`,s);console.log("이메일 발송 결과:",t.data)}catch(t){console.log(t)}},[]),D=s=>{d.filter(x=>x==="option");const t=d.filter(x=>x.includes("required")),{confirm:n,...b}=s,w=s.email;q(b),t.length===4&&o==="success"?(console.log("이메일 링크 요청",{email:w}),B({email:w}),E(b)):P(!0)},p=l.useCallback(s=>{F(s.target.value),g(!0)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(v,{icon:"back",title:"회원가입",onClick:$}),e.jsx("div",{className:"w-full px-28 mt-[60px]",children:e.jsxs(a,{..._,form:u,name:"register",onFinish:s=>D(s),className:"w-full",layout:m,scrollToFirstError:!0,children:[e.jsx(a.Item,{name:"name",label:"이름",rules:[{required:!0,message:"이름은 필수 입력 항목입니다.",whitespace:!0}],children:e.jsx(c,{placeholder:"이름을 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"email",label:"이메일",rules:[{type:"email",message:"이메일 형식에 맞지 않는 메일 주소입니다. 다시 입력해주세요."},{required:!0,message:"이메일은 필수 입력 항목입니다."}],hasFeedback:!0,validateStatus:o,help:o==="error"?"이미 사용 중인 이메일입니다.":o==="success"?"사용 가능한 이메일입니다.":null,children:e.jsx(c,{onBlur:s=>{s.target.value&&T(s)},placeholder:"이메일을 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"pw",label:"비밀번호",rules:[{required:!0,message:"비밀번호는 필수 입력 항목입니다."},{pattern:/^(?=.*[A-Za-z])(?=.*[\d~!@#$%^&*()_+=])[A-Za-z\d~!@#$%^&*()_+=]{8,20}$/,message:"비밀번호는 반드시 8-20자 이내 숫자, 특수문자(), 영문자 중 2가지 이상을 조합하셔야 합니다"}],children:e.jsx(c.Password,{placeholder:"비밀번호를 입력하세요",style:{height:"60px"}})}),e.jsx(a.Item,{name:"confirm",label:"비밀번호 확인",dependencies:["password"],rules:[{required:!0,message:"비밀번호 확인은 필수 입력 항목입니다."},({getFieldValue:s})=>({validator(t,n){return!n||s("pw")===n?Promise.resolve():Promise.reject(new Error("비밀번호가 일치하지 않습니다. 다시 입력해주세요."))}})],children:e.jsx(c.Password,{placeholder:"비밀번호를 다시 한번 입력하세요",style:{height:"60px"}})}),e.jsx(r,{onChange:L,checked:N,className:"bg-slate-100 w-full font-semibold text-lg mb-[15px] py-[10px] px-[15px] rounded-lg",children:"전체 동의합니다."}),e.jsxs(r.Group,{value:d,onChange:A,className:"flex flex-col gap-[10px] mb-[20px] w-full",children:[e.jsx(r,{value:"required-1",children:"[필수] 만 14세 이상입니다."}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(r,{value:"required-2",className:"underline",children:"[필수] 서비스 이용약관"}),e.jsx("button",{type:"button",className:"text-[16px] text-slate-300",value:"required-2",onClick:p,children:"보기"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(r,{value:"required-3",className:"underline",children:"[필수] 개인정보 수집 및 이용 동의"}),e.jsx("button",{type:"button",className:"text-[16px] text-slate-300",value:"required-3",onClick:p,children:"보기"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(r,{value:"required-4",className:"underline",children:"[필수] 위치서비스 이용 동의"}),e.jsx("button",{type:"button",className:"text-[16px] text-slate-300",value:"required-4",onClick:p,children:"보기"})]}),e.jsx(r,{value:"option-1",children:"[선택] 이벤트 및 할인 혜택 안내 동의"})]}),j?e.jsx("p",{className:`${j?"text-secondary3":"text-white"} text-[14px] font-medium`,children:"* 필수 약관을 모두 동의해야 제출 가능합니다."}):null,I?e.jsx(R,{policyType:S,setShowPolicy:g}):null,e.jsx(a.Item,{...G,children:e.jsx(M,{type:"primary",htmlType:"submit",block:!0,className:"h-[60px]",children:"다음"})})]})})]})};export{me as default};
