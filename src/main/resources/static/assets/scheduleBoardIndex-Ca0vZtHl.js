import{a as C,b as S,r as l,j as e,c as g,S as T,B as k}from"./index-YXlYzo5D.js";import{T as I,B as v}from"./TitleHeader-CO4TmWfs.js";import{G as b}from"./index-BoBRUxhP.js";import{a as w}from"./axios-upsvKRUO.js";import{P as _,T as B}from"./pic-Bp3CpqNF.js";const t=["popular","latest"],H=()=>{const p=C(),y=()=>{p(-1)},d=s=>{p(`/scheduleboard/scheduleDetail?tripId=${s.tripId}&TripReviewId=${s.tripReviewId}`)};S().state;const $=l.useRef(null),[x,m]=l.useState(0),[c,u]=l.useState([]),[n,R]=l.useState(0),[h,f]=l.useState(1),[j,N]=l.useState(1);l.useEffect(()=>{console.log("여행기 배열",c)},[c]);const i=async(s=0)=>{t[s]==="popular"&&console.log(`${t[s]} 부르는 페이지:`,h),t[s]==="latest"&&console.log(`${t[s]} 부르는 페이지:`,j);try{const a=await w.get(`/api/trip-review/allTripReview?orderType=${t[s]}&pageNumber=${t[s]==="popular"?h:j}`);console.log(`여행기 모두 불러오기 ${t[s]}`,a.data);const r=a.data;u([...c,...r.data]),r.code==="200 성공"&&(t[s]==="popular"?f(o=>o+1):N(o=>o+1))}catch(a){console.log(`여행기 모두 불러오기 ${t[s]}`,a)}},P=async()=>{try{const s=await w.get("/api/trip-review/allTripReviewCount");console.log(s.data);const a=s.data;R(a.data)}catch(s){console.log("여행기 개수",s)}};return l.useEffect(()=>{i(),P()},[]),l.useEffect(()=>{u([]),i(t[x])},[x]),e.jsxs("div",{children:[e.jsx(I,{onClick:y,title:"여행기",icon:"back"}),e.jsxs("div",{className:"flex flex-col px-[32px]",children:[e.jsxs("div",{className:"flex justify-between items-center py-[30px]",children:[e.jsxs("ul",{className:"flex gap-[20px] items-center",children:[e.jsx("li",{children:e.jsx("button",{type:"button",value:0,className:`${x===0?"text-primary":"text-slate-300"}`,onClick:()=>{m(0),N(1),i("popular")},children:"• 추천순"})}),e.jsx("li",{children:e.jsx("button",{type:"button",value:1,className:`${x===1?"text-primary":"text-slate-300"}`,onClick:()=>{m(1),f(1),i("latest")},children:"• 최신순"})})]}),e.jsxs("p",{children:["총 ",n==null?void 0:n.toLocaleString(),"건"]})]}),e.jsx("ul",{className:"flex flex-col gap-[30px]",children:c?c==null?void 0:c.map((s,a)=>{var r;return e.jsxs("li",{className:`flex flex-col gap-[20px] px-[30px] py-[30px] rounded-3xl\r
                        shadow-[0_0_10px_0_rgba(0,0,0,0.1)] cursor-pointer`,onClick:()=>d(s),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-[10px]",children:[e.jsx("div",{className:"w-[50px] h-[50px] rounded-full overflow-hidden bg-slate-100",children:e.jsx("img",{src:`${_}${s.userId}/${s.profilePic}`,alt:"유저 프로필",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"font-semibold text-[18px] text-slate-700",children:s.name})]}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(v,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:s.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(b,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:s.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(g,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(r=s.scrapCount)==null?void 0:r.toLocaleString()})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-[20px]",children:[e.jsx("div",{className:"w-full h-[322px] bg-slate-200 rounded-2xl overflow-hidden",children:e.jsx("img",{src:s.tripReviewPics!==null?`${B}${s.tripReviewId}/${s.tripReviewPics[0]}`:"",alt:"여행기 사진",className:"w-full h-full object-cover",ref:$})}),e.jsx("h3",{className:"font-semibold text-[24px] text-slate-700",children:s.title}),e.jsx("p",{className:"text-[18px] text-slate-500 line-clamp-3",children:s.content})]})]},a)}):e.jsxs("li",{className:`flex flex-col gap-[20px] px-[30px] py-[30px] rounded-3xl\r
                        shadow-[0_0_10px_0_rgba(0,0,0,0.1)] cursor-pointer`,onClick:()=>d(item),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-[10px]",children:[e.jsx("div",{className:"w-[50px] h-[50px] rounded-full overflow-hidden",children:e.jsx(T.Avatar,{style:{width:"50px",height:"50px"}})}),e.jsx("p",{className:"font-semibold text-[18px] text-slate-700",children:"닉네임"})]}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(v,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:"조회수"})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(b,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:"좋아요"})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(g,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:"작성수"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-[20px]",children:[e.jsx("div",{className:"w-full h-[322px] bg-slate-200 rounded-2xl",children:e.jsx("img",{src:"",alt:"여행기 사진",className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"font-semibold text-[24px] text-slate-700",children:"제목"}),e.jsx("p",{className:"text-[18px] text-slate-500 line-clamp-3",children:"1일차- 제주, 2일차-서귀포’ 함덕, 3일차-성산 기름값 4만원 태우며 렌터카로 알차게 돌아다님. 참고로 2박 3일간 제주 투어패스 48시간 끊었는데 강추!!2박 3일간 제주 투어패스 48시간 끊었는데 강추!!2박 3일간 제주..."})]})]})}),e.jsx("div",{className:"py-[20px]",children:e.jsx(k,{variant:"outlined",className:"w-full",onClick:()=>i(x),children:"더보기"})})]})]})};export{H as default};
