import{g as L,R as $,r as a,u as P,a as R,j as e,I as B,L as _}from"./index-YXlYzo5D.js";import{T as D,R as z}from"./TitleHeader-CO4TmWfs.js";import{A as g}from"./index-CniA-3ne.js";import{S as h}from"./ScheduleDay-Bz2HLZKe.js";import{a as f}from"./axios-upsvKRUO.js";import"./jwt-B7E1_7hB.js";import{t as M}from"./tripAtom-GNgWvRM8.js";import{M as O}from"./MarkerClusterer-gnOPwhky.js";import"./dayjs.min-oIuxugB9.js";import{I as F}from"./index-21tJCDdo.js";import{D as H}from"./index-CuGicAzB.js";import"./match-C9ZeGoa4.js";import"./pic-Bp3CpqNF.js";import"./index-CkEQ-2Ql.js";import"./index-CSA0D24L.js";import"./index-CETnFBLH.js";import"./index-B4chUOCm.js";import"./BaseInput-HRGnWluz.js";import"./EllipsisOutlined-B4oRrxgX.js";import"./collapse-BbEVqHco.js";const q={day:1,weather:"",schedules:[]},xe=()=>{const d=L("accessToken"),[l,j]=$(M);a.useEffect(()=>{console.log("trip",l)},[l]);const[y]=P(),o=parseInt(y.get("tripId"));a.useEffect(()=>{j({...l,nowTripId:o})},[]);const c=R(),b=()=>{c(-1)},k=()=>{c(`/schedule/calculation?tripId=${o}`)},v=()=>{c(`/scheduleboard/schedulePost?tripId=${o}`)},[s,p]=a.useState({}),[N,C]=a.useState(!1),[m,u]=a.useState(s.title),[r,w]=a.useState(""),[T,G]=a.useState(!1);a.useEffect(()=>{console.log("여행 데이터",s)},[s]),a.useEffect(()=>{console.log("링크",r)},[r]),a.useEffect(()=>{console.log("title",m)},[m]);const A=t=>{u(t.target.value)},I=async()=>{try{const t=await f.get(`/api/trip/add-link?trip_id=${o}`,{headers:{Authorization:`Bearer ${d}`}});console.log(t.data),w(t.data.data)}catch(t){console.log("초대코드",t)}},S=async()=>{try{await navigator.clipboard.writeText(r),console.log("복사 성공")}catch(t){console.error("복사 실패:",t)}},E=[{label:e.jsxs("div",{onClick:()=>S(),className:"flex flex-col gap-[10px] items-center justify-center",children:[e.jsx("p",{className:"bg-slate-100 px-[15px] py-[10px] rounded-lg text-slate-600",children:r}),e.jsxs("p",{className:"flex items-center gap-1 border-b border-slate-300",children:[e.jsx("i",{className:"text-slate-500",children:e.jsx(O,{})}),e.jsx("span",{className:"text-slate-500",children:"초대코드 복사하기"})]})]}),key:"0"}],x=async()=>{try{const t=await f.get(`/api/trip?trip_id=${o}`,{headers:{Authorization:`Bearer ${d}`}});console.log("여행확인하기",t.data);const i=t.data.data;p(i),i&&C(!0)}catch(t){console.log(t)}};a.useEffect(()=>{x(),s&&u(s.title)},[]);const n=s.days;return e.jsx("div",{children:N?e.jsxs(e.Fragment,{children:[e.jsx(D,{icon:"back",onClick:b,rightContent:e.jsx(z,{icon1:!1,icon2:!0,icon3Click:v,icon3:!0,icon4:!0})}),e.jsxs("div",{className:"flex flex-col gap-[30px] py-[30px]",children:[e.jsxs("div",{className:"mt-[60px] flex flex-col gap-[10px] px-[32px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-[18px] text-slate-700 ",children:[e.jsx("span",{children:s.startAt}),"-",e.jsx("span",{children:s.endAt})]}),e.jsx("button",{type:"button",children:e.jsx(B,{className:"text-[24px] text-slate-300 bg-white"})})]}),T?e.jsx(F,{placeholder:"메모를 입력해주세요.",variant:"borderless",allowClear:!0,onChange:t=>{A(t)}}):e.jsx("h2",{className:"text-[36px] text-slate-700 font-bold",children:s.title})]}),e.jsxs("div",{className:"flex items-center gap-[10px] px-[32px]",children:[e.jsx(H,{menu:{items:E},trigger:["click"],overlayStyle:{marginTop:"10px"},children:e.jsx("a",{onClick:t=>t.preventDefault(),children:e.jsxs("button",{type:"button",className:`flex items-center gap-[10px] \r
                px-[15px] py-[10px] rounded-3xl\r
                text-white bg-primary`,onClick:()=>I(),children:[e.jsx(g,{}),"초대 코드"]})})}),e.jsxs("button",{type:"button",className:`flex items-center gap-[10px] \r
                px-[15px] py-[10px] rounded-3xl\r
                text-slate-500 bg-slate-100`,onClick:k,children:[e.jsx(g,{className:"text-slate-300"}),"가계부"]})]}),e.jsx("div",{className:"flex flex-col gap-[50px]",children:n===null?e.jsx(h,{newTrip:!0,data:q,startAt:s==null?void 0:s.startAt,tripId:o,getTrip:x,setTripData:p}):n==null?void 0:n.map((t,i)=>e.jsx(h,{newTrip:!0,data:t,startAt:s==null?void 0:s.startAt,tripId:o,getTrip:x,setTripData:p},i))})]})]}):e.jsx(_,{})})};export{xe as default};
