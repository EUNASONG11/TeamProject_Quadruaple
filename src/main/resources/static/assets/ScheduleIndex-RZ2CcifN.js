import{g as I,R as S,r as a,u as E,a as P,j as t}from"./index-DlYLfxzI.js";import{T as R,R as $,I as B}from"./TitleHeader-ChFl6bwT.js";import{A as h}from"./index-DUVLbqhb.js";import{S as f}from"./ScheduleDay-BOyriv64.js";import{a as g}from"./axios-upsvKRUO.js";import"./jwt-7u2p2k-8.js";import{t as _}from"./tripAtom-jTWIlRnr.js";import{M as D}from"./MarkerClusterer-BHsZPz3d.js";import"./dayjs.min-BQnXj5lU.js";import{I as L}from"./index-DB6L5INb.js";import{D as z}from"./index-CLuB-DUR.js";import"./iconBase-DizHl2PJ.js";import"./match-R6ks79gH.js";import"./index-AO4cOa6f.js";import"./button-BR1h7VSD.js";import"./Compact-Bk0X0DCw.js";import"./pic-Bp3CpqNF.js";import"./index-DU7ewKG7.js";import"./index-B13msMtW.js";import"./context-YIeslHxJ.js";import"./KeyCode-DNlgD2sM.js";import"./index-BTlz1CL1.js";import"./ContextIsolator-C_kIobP2.js";import"./Keyframes-BOStT4yD.js";import"./BaseInput-BvEJwfAa.js";import"./CloseCircleFilled-B4CUy9UF.js";import"./useCSSVarCls-Ca5RJBqo.js";import"./PurePanel-msHhh-dL.js";import"./collapse-BbEVqHco.js";const M={day:1,weather:"",schedules:[]},ft=()=>{const x=I("accessToken"),[n,j]=S(_);a.useEffect(()=>{console.log("trip",n)},[n]);const[y]=E(),r=parseInt(y.get("tripId"));a.useEffect(()=>{j({...n,nowTripId:r})},[]);const d=P(),b=()=>{d(-1)},N=()=>{d(`/scheduleboard/schedulePost?tripId=${r}`)},[s,l]=a.useState({}),[m,u]=a.useState(s.title),[o,k]=a.useState(""),[v,O]=a.useState(!1);a.useEffect(()=>{console.log("여행 데이터",s)},[s]),a.useEffect(()=>{console.log("링크",o)},[o]),a.useEffect(()=>{console.log("title",m)},[m]);const C=e=>{u(e.target.value)},w=async()=>{try{const e=await g.get(`/api/trip/add-link?trip_id=${r}`,{headers:{Authorization:`Bearer ${x}`}});console.log(e.data),k(e.data.data)}catch(e){console.log("초대코드",e)}},T=async()=>{try{await navigator.clipboard.writeText(o),console.log("복사 성공")}catch(e){console.error("복사 실패:",e)}},A=[{label:t.jsxs("div",{onClick:()=>T(),className:"flex flex-col gap-[10px] items-center justify-center",children:[t.jsx("p",{className:"bg-slate-100 px-[15px] py-[10px] rounded-lg text-slate-600",children:o}),t.jsxs("p",{className:"flex items-center gap-1 border-b border-slate-300",children:[t.jsx("i",{className:"text-slate-500",children:t.jsx(D,{})}),t.jsx("span",{className:"text-slate-500",children:"초대코드 복사하기"})]})]}),key:"0"}],c=async()=>{try{const e=await g.get(`/api/trip?trip_id=${r}`,{headers:{Authorization:`Bearer ${x}`}});console.log("여행확인하기",e.data);const p=e.data.data;l(p)}catch(e){console.log(e)}};a.useEffect(()=>{c(),s&&u(s.title)},[]);const i=s.days;return t.jsxs("div",{children:[t.jsx(R,{icon:"back",onClick:b,rightContent:t.jsx($,{icon1:!1,icon2:!0,icon3Click:N,icon3:!0,icon4:!0})}),t.jsxs("div",{className:"flex flex-col gap-[30px] py-[30px]",children:[t.jsxs("div",{className:"mt-[60px] flex flex-col gap-[10px] px-[32px]",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-[18px] text-slate-700 ",children:[t.jsx("span",{children:s.startAt}),"-",t.jsx("span",{children:s.endAt})]}),t.jsx("button",{type:"button",children:t.jsx(B,{className:"text-[24px] text-slate-300 bg-white"})})]}),v?t.jsx(L,{placeholder:"메모를 입력해주세요.",variant:"borderless",allowClear:!0,onChange:e=>{C(e)}}):t.jsx("h2",{className:"text-[36px] text-slate-700 font-bold",children:s.title})]}),t.jsxs("div",{className:"flex items-center gap-[10px] px-[32px]",children:[t.jsx(z,{menu:{items:A},trigger:["click"],overlayStyle:{marginTop:"10px"},children:t.jsx("a",{onClick:e=>e.preventDefault(),children:t.jsxs("button",{type:"button",className:`flex items-center gap-[10px] \r
            px-[15px] py-[10px] rounded-3xl\r
            text-white bg-primary`,onClick:()=>w(),children:[t.jsx(h,{}),"초대 코드"]})})}),t.jsxs("button",{type:"button",className:`flex items-center gap-[10px] \r
            px-[15px] py-[10px] rounded-3xl\r
            text-slate-500 bg-slate-100`,children:[t.jsx(h,{className:"text-slate-300"}),"가계부"]})]}),t.jsx("div",{className:"flex flex-col gap-[50px]",children:i===null?t.jsx(f,{newTrip:!0,data:M,startAt:s==null?void 0:s.startAt,tripId:r,getTrip:c,setTripData:l}):i==null?void 0:i.map((e,p)=>t.jsx(f,{newTrip:!0,data:e,startAt:s==null?void 0:s.startAt,tripId:r,getTrip:c,setTripData:l},p))})]})]})};export{ft as default};
