import{g as k,R as C,f as E,r as c,a as A,b as B,u as P,j as e}from"./index-DyHKvFXx.js";import{a as S}from"./axios-upsvKRUO.js";import{R as U}from"./api-B-eoqegl.js";import"./jwt-BWTztxGh.js";import{T as $}from"./TitleHeader-DEuZPhEZ.js";import{A as z}from"./index-DxJqbMz2.js";import{F as t}from"./index-Cy_jBpxb.js";import{I as m}from"./index-BN7SjR02.js";import{R as D}from"./index-BtmQxHij.js";import{U as O}from"./index-NNXuVRA4.js";import{B as V}from"./button-CVG2PKR4.js";import"./context-BzIqkGrz.js";import"./useSize-CzlGeqMr.js";import"./Portal-g2bJLkL6.js";import"./collapse-BbEVqHco.js";import"./ContextIsolator-Bz1oyizr.js";import"./index-CjdS8Kft.js";import"./index-CbCICOLq.js";import"./index-qeKOiAJN.js";import"./useId-4VG1t10X.js";import"./useLocale-D7gYd7Ok.js";import"./BaseInput-Lg7uM-32.js";import"./fade-D4jT0onp.js";import"./CheckOutlined-Bm_iSAUT.js";const fe=()=>{const f=k("accessToken"),[i,_]=C(E);c.useEffect(()=>{},[i]);const p=A(),h=()=>{p(-1)},u=()=>{p(`/contents/index?strfId=${n}`)},o=B().state,[g]=t.useForm(),[I,x]=c.useState([]),[j,b]=c.useState(!1),[v]=P(),n=v.get("strfId"),y=({fileList:l})=>x(l),N=async l=>{const{content:w,file:r,rating:L,strfId:R,userId:T}=l,F={userId:parseInt(T),strfId:parseInt(R),rating:parseInt(L),content:w},a=new FormData;x(r.fileList),a.append("p",new Blob([JSON.stringify(F)],{type:"application/json"})),r&&r.fileList&&r.fileList.length>0&&r.fileList.forEach(s=>{a.append("pics",s.originFileObj)});const d=a.get("p");d&&d.text().then(s=>console.log("p의 내용:",s));try{(await S.post(`${U.postReview}`,a,{headers:{Authorization:`Bearer ${f}`}})).data&&u()}catch(s){console.error(s)}};return e.jsxs("div",{children:[e.jsx($,{icon:"back",onClick:h,title:o==null?void 0:o.strfTitle}),e.jsx("div",{className:"px-[32px] mt-[60px]",children:e.jsxs(t,{form:g,onFinish:N,layout:"vertical",initialValues:{userId:i.userId,strfId:n},className:"mt-[50px]",children:[e.jsx(t.Item,{label:"userId",name:"userId",hidden:!0,children:e.jsx(m,{value:i.userId})}),e.jsx(t.Item,{label:"strfId",name:"strfId",hidden:!0,children:e.jsx(m,{value:n})}),e.jsx(t.Item,{name:"rating",className:"flex flex-col justify-center items-center gap-[10px] text-slate-300",help:e.jsx("div",{className:"text-center mt-[10px] text-slate-300",children:"별점을 입력해주세요."}),children:e.jsx(D,{style:{fontSize:54}})}),e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"리뷰를 남겨주세요."}),e.jsx(t.Item,{name:"content",children:e.jsx(m.TextArea,{rows:4,placeholder:"직접 경험한 솔직한 리뷰를 남겨주세요.",variant:"borderless",maxLength:100,style:{height:300,resize:"none"},onChange:()=>b(!0),className:`placeholder: text-[20px] placeholder: text-slate-400
                ${j?"bg-white":"bg-slate-50"}`})}),e.jsx(t.Item,{name:"file",label:e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"사진 첨부하기"}),children:e.jsx(O,{id:"file",listType:"picture",beforeUpload:()=>!1,fileList:I,onChange:y,multiple:!0,children:e.jsx("div",{className:`w-[136px] h-[136px] flex items-center justify-center\r
               bg-slate-100 hover:bg-[rgb(237,242,248)] rounded-lg\r
               transition`,children:e.jsx(z,{className:"text-[36px] text-slate-400"})})})}),e.jsx(t.Item,{children:e.jsx(V,{type:"primary",htmlType:"submit",className:`w-full h-[80px] py-[10px] rounded-lg\r
              text-[24px] font-semibold`,children:"완료"})})]})})]})};export{fe as default};
