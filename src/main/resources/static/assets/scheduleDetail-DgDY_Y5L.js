import{a as k,r as l,j as e,g as I,u as D}from"./index-DlYLfxzI.js";import{T as L,R as $,B,a as P}from"./TitleHeader-ChFl6bwT.js";import{G as A}from"./index-Bm08_T8y.js";import{S as E}from"./ScheduleDay-BOyriv64.js";import{e as O}from"./index-DUVLbqhb.js";import{S as M,a as z}from"./swiper-react-RSsck8Zw.js";import{a as G}from"./axios-upsvKRUO.js";import{L as H,T as V}from"./pic-Bp3CpqNF.js";import{j as C}from"./jwt-7u2p2k-8.js";import{B as R}from"./button-BR1h7VSD.js";import"./iconBase-DizHl2PJ.js";import"./match-R6ks79gH.js";import"./index-AO4cOa6f.js";import"./MarkerClusterer-BHsZPz3d.js";import"./tripAtom-jTWIlRnr.js";import"./index-DB6L5INb.js";import"./context-YIeslHxJ.js";import"./Compact-Bk0X0DCw.js";import"./BaseInput-BvEJwfAa.js";import"./ContextIsolator-C_kIobP2.js";import"./Keyframes-BOStT4yD.js";import"./CloseCircleFilled-B4CUy9UF.js";import"./useCSSVarCls-Ca5RJBqo.js";import"./index-BTlz1CL1.js";import"./index-DU7ewKG7.js";import"./index-B13msMtW.js";import"./KeyCode-DNlgD2sM.js";const _=({openSelectTripModal:v,setOpenSelectTripModal:p,tripLocationList:h})=>{const f=k(),u=()=>{f("/schedule/days",{state:{selectedLocationId:h,tripId:g.tripId}})},[o,s]=l.useState([]),[j,i]=l.useState(null),[g,n]=l.useState(null);l.useEffect(()=>{console.log("tripListData",o)},[o]);const x=async()=>{try{const t=await C.get("/api/trip-list");console.log(t.data);const m=t.data.data.beforeTripList;s(m)}catch(t){console.log("여행 목록 불러오기:",t)}},w=(t,r)=>{i(r),console.log("item",t),n(t)},N=()=>{p(!1)},d=t=>{t.stopPropagation()};return l.useEffect(()=>{x()},[]),e.jsx("div",{className:`fixed top-0 left-[50%] translate-x-[-50%] z-10\r
\r
            max-w-3xl w-full mx-auto h-screen\r
            flex items-end justify-center\r
            bg-[rgba(0,0,0,0.5)]\r
            `,onClick:()=>{N()},children:e.jsxs("div",{className:`bg-white w-full \r
                rounded-t-2xl px-[60px] py-[55px]\r
                flex flex-col gap-[20px]\r
                `,onClick:d,children:[e.jsx("h2",{className:"text-[28px] text-slate-700 font-bold",children:"이 일정을 담을 여행을 선택해주세요."}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h3",{className:"text-[18px] text-slate-700 font-semibold",children:"나의 다가오는 여행"}),e.jsx("ul",{className:`flex flex-col px-[10px] py-[20px] gap-[30px]\r
          max-h-[55vh] overflow-y-auto`,children:o==null?void 0:o.map((t,r)=>e.jsxs("li",{className:`flex items-center gap-[20px] px-[20px] py-[10px] rounded-[16px] ${j===r?"bg-slate-200":""}`,onClick:()=>w(t,r),children:[e.jsx("div",{className:"w-[50px] h-[50px] bg-slate-100 rounded-full overflow-hidden",children:e.jsx("img",{src:`${H}${t.locationPic}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("h4",{className:"text-[18px] text-slate-700 font-semibold",children:t.title}),e.jsxs("p",{className:"text-[16px] text-slate-500",children:[e.jsx("span",{children:t.startAt}),e.jsx("span",{children:"-"}),e.jsx("span",{children:t.endAt})]})]})]},r))})]}),e.jsx(R,{type:"primary",htmlType:"button",className:"h-[50px] px-[15px] py-[20px] text-[24px] text-white font-semibold",onClick:u,children:"선택 완료"})]})})},je=()=>{var d,t,r,m,T,b,S,y;const v=I("accessToken"),[p]=D(),h=p.get("tripId"),f=p.get("TripReviewId"),u=k(),o=()=>{u(-1)},[s,j]=l.useState({}),[i,g]=l.useState({}),[n,x]=l.useState(!1);l.useEffect(()=>{},[s]);const w=async()=>{try{const c=(await G.get(`/api/trip-review/otherTripReview?tripReviewId=${f}`,{headers:{Authorization:`Bearer ${v}`}})).data;j(c.data)}catch(a){console.log("다른 사람 여행기 조회",a)}},N=async()=>{try{const a=await C.get(`/api/trip?trip_id=${h}`);console.log("여행확인하기",a.data);const c=a.data.data;g(c)}catch(a){console.log(a)}};return l.useEffect(()=>{w(),N()},[]),e.jsxs("div",{children:[e.jsx(L,{icon:"back",onClick:o,rightContent:e.jsx($,{})}),e.jsxs("div",{className:"flex flex-col px-[32px] py-[30px] gap-[30px]",children:[e.jsx(M,{slidesPerView:1,spaceBetween:0,loop:!0,className:"mySwiper w-full h-[406px] px-[32px] overflow-hidden",children:s.length>0?(t=(d=s[0])==null?void 0:d.tripReviewPics)==null?void 0:t.map((a,c)=>e.jsx(z,{className:"max-w-3xl h-[406px] bg-slate-200",children:e.jsx("img",{src:`${V}${s[0].tripReviewId}/${a}`,alt:"thum",className:"w-full h-full object-cover"})},c)):null}),e.jsx("div",{className:"flex flex-col gap-[10px]",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-[36px] text-slate-700",children:(r=s[0])==null?void 0:r.title}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(B,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(m=s[0])==null?void 0:m.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(A,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(T=s[0])==null?void 0:T.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(P,{className:"text-slate-300 text-[18px]"}),e.jsxs("p",{className:"text-slate-500 font-bold text-[14px]",children:[" ",(b=s[0])==null?void 0:b.scrapCount]})]})]})]})}),e.jsx("div",{children:e.jsx("p",{children:(S=s[0])==null?void 0:S.content})})]}),e.jsx("div",{children:e.jsx("div",{className:"flex flex-col gap-[50px]",children:(y=i==null?void 0:i.days)==null?void 0:y.map((a,c)=>e.jsx(E,{data:a,newTrip:!1,readOnly:!0},c))})}),e.jsx("div",{className:"px-[32px] mb-[30px]",children:e.jsxs(R,{variant:"filled",className:"flex gap-[10px] py-[10px] h-auto w-full",onClick:()=>x(!0),classNames:"bg-slate-100",children:[e.jsx(O,{className:"w-[30px] h-[30px] text-white"}),e.jsx("span",{className:"font-semibold text-[24px] text-slate-400",children:"업데이트 예정인 메뉴입니다"})]})}),n&&e.jsx(_,{openSelectTripModal:n,setOpenSelectTripModal:x,tripLocationList:i==null?void 0:i.tripLocationList})]})};export{je as default};
