import{g as h,c as R,k as E,r as o,u as S,j as e,b as k}from"./index-DI0hZm8z.js";import"./TitleHeader-mS6H-Tmw.js";import{a as f,S as A}from"./SearchItems-DKlqNBBm.js";import{a as y}from"./axios-upsvKRUO.js";import{a as N}from"./index-DEV43A_f.js";import{c as C}from"./ContentIndex-BD8UeF16.js";import{a as _}from"./pic-Bp3CpqNF.js";import"./jwt-CjBY-w3Z.js";import"./iconBase-CKNMfARQ.js";import"./index-BegNZk4I.js";import"./index-BexzeIK6.js";import"./context-BkgmL1_r.js";import"./button-Buf7o645.js";import"./BaseInput-By1OPDiL.js";import"./ContextIsolator-DVleuwTK.js";import"./Keyframes-Czc1jmj8.js";import"./index-CrZ0FrIh.js";import"./index-DWZDKYvg.js";import"./KeyCode-C0fAa5Qv.js";import"./Skeleton-Ba0gCTAH.js";import"./index-myjhy1Yj.js";import"./dayjs.min-BkIlPKcF.js";import"./PurePanel-7uLz9-bo.js";import"./CheckOutlined-D9sA_cg5.js";import"./useLocale-Xy-GD7mZ.js";import"./index-Csso9VXn.js";import"./InfoCircleFilled-S7_yNcJH.js";import"./index-DwrwPTWB.js";import"./index-BGS5ugP2.js";import"./tripAtom-BRZLLedy.js";const $=({searchData:x,setSearchData:t,setSearchValue:l,searchValue:c,setSearchState:n})=>{const i=h("accessToken"),{userId:j}=R(E),[p,g]=o.useState([]),[r,a]=o.useState([]),m=S(),v=async()=>{try{const u=(await y.get("/api/search/popular")).data;g(u.data)}catch(s){console.log("인기검색어 결과",s)}};o.useEffect(()=>{},[p]);const b=async()=>{try{const u=(await y.get(`/api/search/basic?user_id=${j}`,{headers:{Authorization:`Bearer ${i}`}})).data;a(u.data)}catch(s){console.log("최근 본 검색 결과",s)}};o.useEffect(()=>{},[r]);const w=s=>{console.log("클릭한 인기 검색어:",s),l(s.strfName),m(`/contents/index?strfId=${s.strfId}`)},T=s=>{console.log(s),m(`/contents/index?strfId=${s.strfId}`)};return o.useEffect(()=>{v(),i&&b()},[]),e.jsxs("div",{className:"px-[32px] flex flex-col gap-[50px]",children:[e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"인기 검색어"}),e.jsx("ul",{className:"flex gap-[20px] flex-wrap",children:p?p==null?void 0:p.map((s,u)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",onClick:()=>w(s),children:s.strfName},u)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),i?e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"최근 본 목록"}),e.jsx("button",{type:"button",className:"text-slate-400 text-[18px]",children:"모두 삭제"})]}),e.jsx("ul",{className:"flex flex-col gap-[20px]",children:r?r==null?void 0:r.map((s,u)=>e.jsxs("li",{className:"flex cursor-pointer items-center justify-between",onClick:()=>T(s),children:[e.jsxs("div",{className:"flex gap-[15px]",children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-2xl overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:s.strfPic?`${_}${s.strfId}/${s.strfPic}`:"/public/images/logo_icon_4.png",alt:s.strfName})}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:s.strfName}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:C(s.category)}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:s.locationTitle})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",children:e.jsx(N,{})})]},u)):e.jsxs("li",{className:"flex cursor-pointer justify-between items-center",children:[e.jsxs("div",{className:"flex gap-[15px]",children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-[16px] overflow-hidden bg-slate-200"}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:"제목"}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:"카테고리"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"지역"})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",children:e.jsx(N,{})})]})})]}):null]})},d=[{type:"all",name:"전체"},{type:"TOUR",name:"관광지"},{type:"STAY",name:"숙소"},{type:"RESTAUR",name:"맛집"},{type:"FEST",name:"축제"}],I=({searchValue:x,searchData:t,setSearchData:l})=>{const[c,n]=o.useState(0),i=o.useRef(null),j=t==null?void 0:t.filter(a=>a.category==="TOUR"),p=t==null?void 0:t.filter(a=>a.category==="STAY"),g=t==null?void 0:t.filter(a=>a.category==="RESTAUR"),r=t==null?void 0:t.filter(a=>a.category==="FEST");return e.jsxs("div",{className:"px-[32px] py-[30px] flex flex-col gap-[30px]",children:[e.jsx("ul",{className:"flex gap-[10px]",ref:i,children:d.map((a,m)=>e.jsx("li",{className:`cursor-pointer font-semibold text-[16px] w-[124px] flex justify-center items-center px-[15px] py-[10px] gap-[10px] rounded-[8px] ${m===c?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{n(m)},children:a.name},m))}),c===0&&e.jsxs("div",{children:[e.jsx(f,{type:d[1].type,name:d[1].name,data:j,searchValue:x,searchData:t,setSearchData:l}),e.jsx(f,{type:d[2].type,name:d[2].name,data:p,searchValue:x,searchData:t,setSearchData:l}),e.jsx(f,{type:d[3].type,name:d[3].name,data:g,searchValue:x,searchData:t,setSearchData:l}),e.jsx(f,{type:d[4].type,name:d[4].name,data:r,searchValue:x,searchData:t,setSearchData:l})]}),c===1&&e.jsx("div",{children:e.jsx(f,{type:"TOUR",data:j,searchValue:x,searchData:t,setSearchData:l,setSelectedCate:n})}),c===2&&e.jsx("div",{children:e.jsx(f,{type:"STAY",data:p,searchValue:x,searchData:t,setSearchData:l,setSelectedCate:n})}),c===3&&e.jsx("div",{children:e.jsx(f,{type:"RESTAUR",data:g,searchValue:x,searchData:t,setSearchData:l,setSelectedCate:n})}),c===4&&e.jsx("div",{children:e.jsx(f,{type:"FEST",data:r,searchValue:x,searchData:t,setSearchData:l,setSelectedCate:n})})]})},ie=()=>{k(),h("accessToken"),S();const[x,t]=o.useState(!1),[l,c]=o.useState(""),[n,i]=o.useState([]),[j,p]=o.useState("");o.useEffect(()=>{},[n]);const g=async()=>{const r={search_word:l,last_index:0};console.log("검색:",r);try{const a=await y.post(`/api/search/all?search_word=${l}&last_index=1`,{...r});console.log("검색 결과 호출",a.data);const m=a.data;i([...m.data])}catch(a){console.log(a)}};return o.useEffect(()=>{g()},[l]),e.jsxs("div",{className:"w-full flex flex-col gap-[30px]",children:[e.jsx(A,{searchValue:l,setSearchValue:c,setSearchState:t,inputValue:j,setInputValue:p,searchData:n,setSearchData:i}),x?e.jsx(I,{searchValue:l,searchData:n,setSearchData:i}):e.jsx($,{setSearchState:t,searchData:n,setSearchData:i,setSearchValue:c,searchValue:l})]})};export{ie as default};
