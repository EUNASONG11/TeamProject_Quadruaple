import{g as B,R as F,r as s,d as V,u as P,a as H,j as e,F as O,L as U}from"./index-DCiO2zt9.js";import{j as N}from"./jwt-BQylCE3X.js";import{t as v}from"./tripAtom-BsOqBdJX.js";import"./SearchItems-Zq6HWXZx.js";import{a as z}from"./pic-Bp3CpqNF.js";import{a as K,b as S}from"./index-DR37Da_n.js";import{I as W}from"./TitleHeader-DbVn1HSQ.js";import{I as Y}from"./index-HJzg_HzV.js";import{R as w}from"./index-B5yqxVNs.js";import{B as q}from"./button-D2uSiSHr.js";import"./axios-upsvKRUO.js";import"./match-DhA2S1Yr.js";import"./Skeleton-BlpjURAM.js";import"./useSize-BJ-bkfiM.js";import"./context-Dpse4XNJ.js";import"./BaseInput-B3eH5To0.js";import"./useId-IhhDF7kv.js";import"./ContextIsolator-CE3SJgc1.js";import"./Portal-Be4Yb3ps.js";import"./index-DRaaD_Ms.js";import"./index-D85iItX7.js";const n=[{type:null,name:"전체"},{type:"TOUR",name:"관광지"},{type:"STAY",name:"숙소"},{type:"RESTAUR",name:"맛집"},{type:"FEST",name:"축제"}],ge=()=>{B("accessToken");const[o,G]=F(v);s.useEffect(()=>{console.log("trip",o)},[o]),V(v);const[y]=P(),p=parseInt(y.get("tripId"));s.useEffect(()=>{u(!0)},[]);const d=H(),b=t=>{console.log(t),d(`/contents/index?strfId=${t}`)},[I,C]=s.useState(0),[$,E]=s.useState(0);s.useState(0);const[l,m]=s.useState([]),[J,u]=s.useState(!1),[f,R]=s.useState(""),[r,L]=s.useState(""),[g,_]=s.useState(0),[x,A]=s.useState(null),[T,h]=s.useState(!1);s.useState(!0),s.useEffect(()=>{console.log("searchValue",r)},[r]),s.useEffect(()=>{},[g]);const j=async()=>{try{const a=(await N.get(`/api/search/strf-list-basic?trip_id=${p}&last_index=${I}`)).data;m([...l,...a.data.list]),a&&(h(!0),C(i=>i+10))}catch(t){console.log("결과-입력 전:",t)}},c=async(t=null)=>{try{const i=(await N.get(`/api/search/strf-list-word?trip_id=${p}&last_index=${$}&category=${x}&search_word=${r}`)).data;m([...l,...i.data.list]),i&&(h(!0),E(k=>k+10))}catch(a){console.log("결과-입력 후:",a)}};return s.useEffect(()=>{j()},[]),s.useEffect(()=>{x!==null&&c()},[x]),l==null||l.list,e.jsxs("div",{className:"w-full flex flex-col gap-[30px]",children:[T?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full px-[32px] py-[30px] flex items-center gap-[40px] relative ",children:[e.jsx("div",{className:"text-[36px] cursor-pointer",onClick:()=>{d(-1)},children:e.jsx(W,{})}),e.jsx(Y,{placeholder:"지금 어디로 여행을 떠나고 싶으신가요?",variant:"borderless",prefix:e.jsx(O,{className:"text-slate-400 text-2xl"}),allowClear:!0,onChange:t=>{R(t.target.value)},onKeyDown:t=>{t.code==="Enter"&&(L(t.target.value),u(!0),c())},value:f,className:`w-full h-[60px] px-[12px] ${f?"bg-white":"bg-slate-100"}`})]}),e.jsx("ul",{className:"flex gap-[10px] px-[32px] justify-between items-center",children:n.map((t,a)=>e.jsx("li",{className:`cursor-pointer font-semibold text-[16px] w-[124px] flex justify-center items-center px-[15px] py-[10px] gap-[10px] rounded-[8px] ${a===g?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{_(a),c(n[a].type),A(n[a].name)},children:t.name},a))}),e.jsx("ul",{className:"px-[32px] py-[30px] flex flex-col gap-[30px]",children:(l==null?void 0:l.length)>0?l==null?void 0:l.map((t,a)=>e.jsxs("li",{className:"flex gap-[20px] items-center cursor-pointer",onClick:()=>{b(t.strfId)},children:[e.jsx("div",{className:"w-[130px] h-[130px] bg-slate-200 rounded-[8px] overflow-hidden",children:e.jsx("img",{src:`${z}${t.strfId}/${t.picTitle}`,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:t.title})}),e.jsx("div",{className:"flex gap-[5px] items-center"}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(w,{disabled:!0,count:1,value:t.ratingIn?1:0,style:{fontSize:"16px"}}),e.jsx("p",{className:"text-[12px] text-slate-500",children:t.averageRating}),e.jsxs("p",{className:"text-[12px] text-slate-500",children:["(",t.ratingCnt.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:t.wishIn?e.jsx(K,{className:"text-secondary3 text-[16px]"}):e.jsx(S,{className:"text-slate-400 text-[16px]"})}),e.jsx("p",{className:"text-[12px] text-slate-500",children:t.wishCnt.toLocaleString()})]})]})]},a)):e.jsxs("li",{className:"flex gap-[20px] items-center cursor-pointer",children:[e.jsx("div",{className:"w-[130px] h-[130px] bg-slate-200 rounded-[8px]"}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:"검색 결과가 없습니다."})}),e.jsx("div",{className:"flex gap-[5px] items-center"}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(w,{disabled:!0,count:1,value:0}),e.jsx("p",{className:"text-[12px] text-slate-500"}),e.jsx("p",{className:"text-[12px] text-slate-500"})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:e.jsx(S,{className:"text-slate-400"})}),e.jsx("p",{className:"text-[12px] text-slate-500"})]})]})]})})]}):e.jsx(U,{}),e.jsx(q,{onClick:()=>{r!==""?c():j()},className:"mb-[30px]",children:"더보기"})]})};export{ge as default};
