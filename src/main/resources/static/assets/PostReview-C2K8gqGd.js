import{g as F,R as k,e as E,r as l,a as A,b as B,u as C,j as e}from"./index-DlYLfxzI.js";import{a as P}from"./axios-upsvKRUO.js";import{R as S}from"./api-B-eoqegl.js";import"./jwt-7u2p2k-8.js";import{T as U}from"./TitleHeader-ChFl6bwT.js";import{A as z}from"./index-DUVLbqhb.js";import{F as t}from"./index-DjL6erB6.js";import{I as c}from"./index-DB6L5INb.js";import{R as D}from"./index-B13msMtW.js";import{U as O}from"./index-BpibW2ZQ.js";import{B as $}from"./button-BR1h7VSD.js";import"./iconBase-DizHl2PJ.js";import"./context-YIeslHxJ.js";import"./Compact-Bk0X0DCw.js";import"./ContextIsolator-C_kIobP2.js";import"./Keyframes-BOStT4yD.js";import"./useCSSVarCls-Ca5RJBqo.js";import"./collapse-BbEVqHco.js";import"./index-CWjHN-4J.js";import"./index-BTlz1CL1.js";import"./useLocale-BfdyWMY4.js";import"./ExclamationCircleFilled-f_0hTFyt.js";import"./CloseCircleFilled-B4CUy9UF.js";import"./BaseInput-BvEJwfAa.js";import"./KeyCode-DNlgD2sM.js";import"./fade-B7Lu0xEJ.js";import"./CheckOutlined-xh6U5mNU.js";import"./CloseOutlined-B68bXNli.js";const ge=()=>{const f=F("accessToken"),[i,V]=k(E);l.useEffect(()=>{console.log(i)},[i]);const h=A(),u=()=>{h(-1)},a=B().state;console.log(a);const[g]=t.useForm(),[m,p]=l.useState([]),[I,j]=l.useState(!1),[b]=C(),x=b.get("strfId"),y=({fileList:n})=>p(n),v=async n=>{const{content:N,file:o,rating:w,strfId:L,userId:R}=n,T={userId:parseInt(R),strfId:parseInt(L),rating:parseInt(w),content:N},r=new FormData;p(o.fileList),r.append("p",new Blob([JSON.stringify(T)],{type:"application/json"})),console.log(n),console.log(m),o&&o.fileList&&o.fileList.length>0&&o.fileList.forEach(s=>{r.append("pics",s.originFileObj)});const d=r.get("p");d&&d.text().then(s=>console.log("p의 내용:",s)),console.log("보낸 데이터",[...r]);try{const s=await P.post(`${S.postReview}`,r,{headers:{Authorization:`Bearer ${f}`}});console.log(s.data)}catch(s){console.error(s)}};return e.jsxs("div",{children:[e.jsx(U,{icon:"back",onClick:u,title:a==null?void 0:a.strfTitle}),e.jsx("div",{className:"px-[32px] mt-[60px]",children:e.jsxs(t,{form:g,onFinish:v,layout:"vertical",initialValues:{userId:i.userId,strfId:x},className:"mt-[50px]",children:[e.jsx(t.Item,{label:"userId",name:"userId",hidden:!0,children:e.jsx(c,{value:i.userId})}),e.jsx(t.Item,{label:"strfId",name:"strfId",hidden:!0,children:e.jsx(c,{value:x})}),e.jsxs(t.Item,{name:"rating",className:"flex flex-col justify-center items-center gap-[10px]",children:[e.jsx(D,{style:{fontSize:54}}),e.jsx("p",{className:"text-slate-300 text-center mt-[10px]",children:"별점을 선택해주세요"})]}),e.jsxs(t.Item,{name:"content",children:[e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"리뷰를 남겨주세요."}),e.jsx(c.TextArea,{rows:4,placeholder:"직접 경험한 솔직한 리뷰를 남겨주세요.",variant:"borderless",maxLength:100,style:{height:300,resize:"none"},onChange:()=>j(!0),className:`placeholder: text-[20px] placeholder: text-slate-400
                ${I?"bg-white":"bg-slate-50"}`})]}),e.jsx(t.Item,{label:e.jsx("h3",{className:"mb-[10px] text-slate-700 text-[24px] font-semibold",children:"사진 첨부하기"}),name:"file",children:e.jsx(O,{id:"file",listType:"picture",beforeUpload:()=>!1,fileList:m,onChange:y,multiple:!0,children:e.jsx("div",{className:`w-[136px] h-[136px] flex items-center justify-center\r
               bg-slate-100 hover:bg-[rgb(237,242,248)] rounded-lg\r
               transition`,children:e.jsx(z,{className:"text-[36px] text-slate-400"})})})}),e.jsx(t.Item,{children:e.jsx($,{type:"primary",htmlType:"submit",className:`w-full h-[80px] py-[10px] rounded-lg\r
              text-[24px] font-semibold`,children:"완료"})})]})})]})};export{ge as default};
