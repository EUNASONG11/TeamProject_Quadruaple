import{g as A,c as E,n as k,r as l,u as v,j as e,b as C,a as $}from"./index-DIxnD1JS.js";import"./TitleHeader-serYiGmW.js";import{a as y,S as _}from"./SearchItems-B2BTRB_f.js";import{a as h}from"./axios-upsvKRUO.js";import{a as I}from"./index-Cn6zzcDW.js";import{a as B}from"./pic-Bp3CpqNF.js";import{c as L}from"./match-QaCd9MGg.js";import"./jwt-DMf2LOVp.js";import{D as P}from"./DockBar-_gXDh4Do.js";import"./iconBase-CW5Yvc9x.js";import"./index-Ces5SpNx.js";import"./index-BJd-TzMh.js";import"./context-lGdVmPVg.js";import"./Compact-Bk6bZNyr.js";import"./BaseInput-CdSNedUu.js";import"./button-COK4q_fH.js";import"./ContextIsolator-XDRKbmbU.js";import"./Keyframes-_LtNcjJI.js";import"./CloseCircleFilled-DnDad3pI.js";import"./useCSSVarCls-DxqRy2bH.js";import"./index-G_TVl1Ti.js";import"./index-CIfDN8Cb.js";import"./index-BQnDhNY2.js";import"./KeyCode-DNlgD2sM.js";import"./Skeleton-DYfeL3iT.js";import"./index-CE9KWWCp.js";import"./index-gG4Lsbwo.js";import"./index-UhA8VVa1.js";import"./ExclamationCircleFilled-Bv2RArU5.js";import"./InfoCircleFilled-C-ECSgh3.js";import"./CloseOutlined-CDiIOYJ9.js";const U=({searchData:i,setSearchData:s,setSearchValue:o,searchValue:a,setSearchState:d})=>{const c=A("accessToken"),{userId:m}=E(k),[p,j]=l.useState([]),[x,r]=l.useState([]),n=v(),N=async()=>{try{const f=(await h.get("/api/search/popular")).data;j(f.data)}catch(t){console.log("인기검색어 결과",t)}};l.useEffect(()=>{},[p]);const S=async()=>{try{const f=(await h.get(`/api/search/basic?user_id=${m}`,{headers:{Authorization:`Bearer ${c}`}})).data;r(f.data)}catch(t){console.log("최근 본 검색 결과",t)}};l.useEffect(()=>{},[x]);const b=t=>{console.log("클릭한 인기 검색어:",t),o(t.strfName),n(`/contents/index?strfId=${t.strfId}`)},R=t=>{console.log(t),n(`/contents/index?strfId=${t.strfId}`)},T=async t=>{const f={strf_id:t.strfId};try{const g=await h.patch(`/api/recent/hide?strf_id=${t.strfId}`,{...f},{headers:{Authorization:`Bearer ${c}`}});console.log(g.data),g.data&&S()}catch(g){console.log("개별 삭제",g)}},w=async()=>{try{const t=await h.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${c}`}});console.log(t.data),t.data&&S()}catch(t){console.log("개별 삭제",t)}};return l.useEffect(()=>{N(),c&&S()},[]),e.jsxs("div",{className:"px-[32px] flex flex-col gap-[50px]",children:[e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"인기 검색어"}),e.jsx("ul",{className:"flex gap-[20px] flex-wrap",children:p?p==null?void 0:p.map((t,f)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",onClick:()=>b(t),children:t.strfName},f)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),c?e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-[24px] font-semibold text-slate-700",children:"최근 본 목록"}),e.jsx("button",{type:"button",className:"text-slate-400 text-[18px]",onClick:()=>w(),children:"모두 삭제"})]}),e.jsx("ul",{className:"flex flex-col gap-[20px]",children:x?x==null?void 0:x.map((t,f)=>e.jsxs("li",{className:"flex cursor-pointer items-center justify-between",children:[e.jsxs("div",{className:"flex gap-[15px]",onClick:()=>R(t),children:[e.jsx("div",{className:"w-[80px] h-[80px] rounded-2xl overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:t.strfPic?`${B}${t.strfId}/${t.strfPic}`:"/public/images/logo_icon_4.png",alt:t.strfName})}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:t.strfName}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-[14px]",children:L(t.category)}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:"•"}),e.jsx("span",{className:"text-slate-500 text-[14px]",children:t.locationTitle})]})]})]}),e.jsx("button",{type:"button",className:"text-slate-400 text-[20px]",onClick:()=>T(t),children:e.jsx(I,{})})]},f)):null})]}):null]})},u=[{type:"all",name:"전체"},{type:"TOUR",name:"관광지"},{type:"STAY",name:"숙소"},{type:"RESTAUR",name:"맛집"},{type:"FEST",name:"축제"}],F=({searchValue:i,searchData:s,setSearchData:o})=>{const[a,d]=l.useState(0),c=l.useRef(null),m=Array.isArray(s)?s.filter(r=>r.category==="TOUR"):[],p=Array.isArray(s)?s.filter(r=>r.category==="STAY"):[],j=Array.isArray(s)?s.filter(r=>r.category==="RESTAUR"):[],x=Array.isArray(s)?s.filter(r=>r.category==="FEST"):[];return e.jsxs("div",{className:"px-[32px] py-[30px] flex flex-col gap-[30px]",children:[e.jsx("ul",{className:"flex gap-[10px]",ref:c,children:u.map((r,n)=>e.jsx("li",{className:`cursor-pointer font-semibold text-[16px] w-[124px] flex justify-center items-center px-[15px] py-[10px] gap-[10px] rounded-[8px] ${n===a?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{d(n)},children:r.name},n))}),a===0&&e.jsxs("div",{children:[e.jsx(y,{type:u[1].type,name:u[1].name,data:m,searchValue:i,searchData:s,setSearchData:o}),e.jsx(y,{type:u[2].type,name:u[2].name,data:p,searchValue:i,searchData:s,setSearchData:o}),e.jsx(y,{type:u[3].type,name:u[3].name,data:j,searchValue:i,searchData:s,setSearchData:o}),e.jsx(y,{type:u[4].type,name:u[4].name,data:x,searchValue:i,searchData:s,setSearchData:o})]}),a===1&&e.jsx("div",{children:e.jsx(y,{type:"TOUR",data:m,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:d})}),a===2&&e.jsx("div",{children:e.jsx(y,{type:"STAY",data:p,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:d})}),a===3&&e.jsx("div",{children:e.jsx(y,{type:"RESTAUR",data:j,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:d})}),a===4&&e.jsx("div",{children:e.jsx(y,{type:"FEST",data:x,searchValue:i,searchData:s,setSearchData:o,setSelectedCate:d})})]})},ye=()=>{C(),A("accessToken"),v(),$().state;const[s,o]=l.useState(!1),[a,d]=l.useState(""),[c,m]=l.useState([]),[p,j]=l.useState("");l.useEffect(()=>{},[c]);const x=async()=>{const r={search_word:a,last_index:0};console.log("검색:",r);try{const n=await h.post(`/api/search/all?search_word=${a}&last_index=1`,{...r});console.log("검색 결과 호출",n.data);const N=n.data;m([...N.data])}catch(n){console.log(n)}};return l.useEffect(()=>{x()},[a]),e.jsxs("div",{className:"w-full flex flex-col gap-[30px]",children:[e.jsx(_,{searchValue:a,setSearchValue:d,setSearchState:o,inputValue:p,setInputValue:j,searchData:c,setSearchData:m}),s?e.jsx(F,{searchValue:a,searchData:c,setSearchData:m}):e.jsx(U,{setSearchState:o,searchData:c,setSearchData:m,setSearchValue:d,searchValue:a}),e.jsx(P,{})]})};export{ye as default};
