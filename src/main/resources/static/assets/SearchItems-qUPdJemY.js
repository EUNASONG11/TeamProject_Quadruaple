import{p as S,g as y,u as I,r as a,j as e}from"./index-BDH47TWw.js";import{b as k}from"./TitleHeader-Cbinm1cJ.js";import{F as $}from"./index-CAw9vkrj.js";import{a as w}from"./axios-upsvKRUO.js";import{I as C}from"./index-BYKM5Fq_.js";import{a as R,b as A,f as B}from"./index-CqscX1Ht.js";import{a as D}from"./pic-Bp3CpqNF.js";import{c as E}from"./match-C8gFOv6c.js";import{R as b}from"./index-D6h1dpo6.js";import{S as T}from"./Skeleton-CdURsCUQ.js";const J=S.memo(({searchValue:r,setSearchValue:i,setSearchState:o,searchData:d,setSearchData:m})=>{const n=y("accessToken"),h=I(),[f,c]=a.useState(!1),[u,p]=a.useState(""),[l,g]=a.useState([]);a.useEffect(()=>{},[l]);const j=async()=>{try{const x=(await w.get("/api/search/list",{headers:{Authorization:`Bearer ${n}`}})).data.data.filter(v=>v.txt!=="");g(x)}catch(s){console.log("최근 검색어 호출 결과:",s)}};a.useEffect(()=>{n&&j()},[]);const N=async()=>{const s={search_word:r};try{const x=(await w.post(`/api/search/all?search_word=${r}`,{...s},{headers:{Authorization:`Bearer ${n}`}})).data;console.log("최근 검색어 클릭 결과",x),m(x.data)}catch(t){console.log(t)}};return a.useEffect(()=>{},[l]),e.jsxs("div",{className:"w-full px-[32px] py-[30px] flex items-center gap-[40px] relative ",children:[e.jsx("div",{className:"text-[36px] cursor-pointer",onClick:()=>{h(-1)},children:e.jsx(k,{})}),e.jsx(C,{placeholder:"지금 어디로 여행을 떠나고 싶으신가요?",variant:"borderless",allowClear:!0,onChange:s=>{p(s.target.value)},onKeyDown:s=>{s.code==="Enter"&&(i(s.target.value),c(!1),o(!0))},onFocus:()=>{c(!0)},onBlur:()=>setTimeout(()=>c(!1),200),prefix:e.jsx($,{className:"text-slate-400 text-2xl"}),className:`w-full h-[60px] px-[12px] ${u?"bg-white":"bg-slate-100"}`}),f?e.jsx("div",{className:`absolute top-[90%] translate-y-[0] left-[0]\r
          w-full flex justify-center items-center gap-[20px]`,children:l?l==null?void 0:l.map((s,t)=>e.jsx("button",{onClick:()=>{i(s.txt),o(!0),c(!1),N(s.txt)},className:"text-slate-600",children:s.txt},t)):e.jsx("li",{className:"text-slate-700 text-[16px]",children:"데이터 없음"})}):null]})}),F=a.forwardRef(({type:r,name:i,data:o,searchValue:d,searchData:m,setSearchData:n,setSelectedCate:h},f)=>{const c=y("accessToken"),u=I(),p=s=>{u(`/contents/index?strfId=${s.strfId}`,{state:{searchValue:d}})},[l,g]=a.useState(0);a.useEffect(()=>{},[l]);const j=async s=>{try{const t=await w.get(`/api/search/category?last_index=${l}&category=${r}&search_word=${d}`,{headers:{Authorization:`Bearer ${c}`}});console.log("더보기 결과:",t.data);const x=t.data;n([...m,...x.data]),g(v=>v+10)}catch(t){console.log("더보기 에러:",t)}},N=()=>{console.log(r),h(r),j()};return e.jsxs("div",{ref:f,className:"flex flex-col gap-[20px] items-center",children:[e.jsx("h2",{className:"w-full text-[24px] font-semibold text-slate-700",children:i}),e.jsx("ul",{className:"w-full flex flex-col gap-[20px] mb-[30px]",children:o?o.map((s,t)=>e.jsxs("li",{className:"flex gap-[20px] items-center cursor-pointer",onClick:()=>{p(s)},children:[e.jsx("div",{className:"w-[130px] h-[130px] bg-slate-200 rounded-[8px] overflow-hidden",children:e.jsx("img",{src:`${D}${s.strfId}/${s.strfPic}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:s.title})}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("p",{className:"text-[14px] text-slate-500",children:E(s.category)}),e.jsx("p",{className:"text-[14px] text-slate-500",children:"|"}),e.jsx("p",{className:"text-[14px] text-slate-500",children:s.locationName})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(b,{disabled:!0,count:1,value:s.ratingIn?1:0}),e.jsx("p",{className:"text-[12px] text-slate-500",children:s.averageRating?s.averageRating:"0"}),e.jsxs("p",{className:"text-[12px] text-slate-500",children:["(",s.reviewCount.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:s.wishIn?e.jsx(R,{className:"text-secondary3"}):e.jsx(A,{className:"text-slate-400"})}),e.jsx("p",{className:"text-[12px] text-slate-500",children:s.wishlistCount.toLocaleString()})]})]})]},t)):e.jsxs("li",{className:"flex gap-[20px] items-center cursor-pointer",onClick:p,children:[e.jsx("div",{className:"w-[130px] h-[130px] bg-slate-200 rounded-[8px]",children:e.jsx(T.Image,{active:!1,size:"large",style:{width:"130px",height:"130px"}})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:"제목"})}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("p",{className:"text-[14px] text-slate-500",children:"카테고리"}),e.jsx("p",{className:"text-[14px] text-slate-500",children:"|"}),e.jsx("p",{className:"text-[14px] text-slate-500",children:"지역"})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(b,{disabled:!0,count:1,value:0}),e.jsx("p",{className:"text-[12px] text-slate-500",children:"평점"}),e.jsxs("p",{className:"text-[12px] text-slate-500",children:["(",1e3.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:e.jsx(B,{className:"text-slate-400 bg-white"})}),e.jsx("p",{className:"text-[12px] text-slate-500",children:1e3.toLocaleString()})]})]})]})}),e.jsxs("button",{type:"button",className:`px-[20px] py-[10px] border border-slate-300 \r
        rounded-[24px] text-[16px] font-semibold text-slate-600`,onClick:()=>N(),children:[r," 검색결과 더보기"]})]})}),Q=a.memo(F);export{J as S,Q as a};
